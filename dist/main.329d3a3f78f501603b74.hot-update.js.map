{"version":3,"file":"main.329d3a3f78f501603b74.hot-update.js","sources":["/Users/kayvon/Dev/gpio-sandbox/src/App.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport Dashboard from './dashboard/Dashboard'\nimport Box from '@mui/material/Box';\nimport { NstrumentaClient } from 'nstrumenta';\nimport { PinState, PinIOStateType, GPIOTimeSeriesData, GPIOState, PinData } from './types';\nimport { createContext, useEffect, useState } from 'react';\n\nconst CHANNEL = 'gpio';\n\nconst nst = new NstrumentaClient({\n  apiKey: '',\n  hostUrl: 'ws://localhost:8088',\n  projectId: 'mapbox-geo'\n});\n\nconst initialGPIOState: GPIOState = {};\nfor (let i = 1; i <= 40; i += 1) {\n  initialGPIOState[i.toString()] = {\n    id: i.toString(),\n    updatedAt: new Date(),\n    io: PinIOStateType.IN,\n  }\n}\n\nconst initialTimeSeriesData: GPIOTimeSeriesData = {};\nfor (let i = 1; i <= 40; i += 1) {\n  initialTimeSeriesData[i.toString()] = [{\n    id: i.toString(),\n    date: new Date(Date.now() + 30 * 60 * 1000),\n    value: null,\n  }\n]}\n\nconst gpioContext = createContext<GPIOTimeSeriesData>({});\n\nexport const useGPIOData = () => {\n  const [data, setData] = useState<GPIOTimeSeriesData>(initialTimeSeriesData);\n\n  useEffect(() => {\n    nst.addListener('open', () => {\n      nst.subscribe(CHANNEL, (pinData: PinData) => {\n        setData({\n          ...data,\n          [pinData.id]: data[pinData.id].concat(pinData),\n        })\n      })\n    })\n\n    return gpioContext;\n  });\n}\n\nexport default function App() {\n\n\n  return (\n    <Box>\n      <Dashboard/>\n    </Box>\n\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AACA;AAhBA;AACA;AAgBA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAKA;AATA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}